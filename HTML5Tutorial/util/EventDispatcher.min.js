var util=util||{};util.EventDispatcher=function(a){this.events=[];this.context=a};util.EventDispatcher.prototype.events=null;util.EventDispatcher.prototype.context=null;util.EventDispatcher.prototype.addEventListener=function(a,d,c,b){b=b||0;this.events[a]=this.events[a]||{};d={context:c,callback:d,priority:b};if(this.events[a].listeners){for(var a=this.events[a].listeners,c=!1,e=0,f=a.length;e<f;e++)if(b<a[e].priority){a.splice(e,0,d);c=!0;break}c||a.push(d)}else this.events[a].listeners=[d]};
util.EventDispatcher.prototype.hasEventListener=function(a,d){var c=this.events[a]?this.events[a].listeners:null;if(!c)return!1;if(!d)return 0<c.length;for(var b=0,e=c.length;b<e;b++)if(c[b].callback===d)return!0;return!1};util.EventDispatcher.prototype.removeEventListener=function(a,d){var c=this.events[a]?this.events[a].listeners:null;if(!c||1>c.length)return!1;if(!d)return this.events[a].listeners=[],!0;for(var b=0,e=c.length;b<e;b++)if(c[b].callback===d)return c.splice(b,1),!0;return!1};
util.EventDispatcher.prototype.dispatchEvent=function(a){var d=a.type;if((d=this.events[d]?this.events[d].listeners:null)&&!(1>d.length))for(var c=d.length-1;0<=c;c--){var b=d[c],b=b.callback.call(b.context?b.context:this.context,a);if(void 0!==b&&!b)break}};